{% extends "base.html" %}
{% load static %}
{% with hide_navbar=True %}

{% block title %}Iniciar Sesión{% endblock %}

{% block extra_head %}
<link rel="stylesheet" href="{% static 'accounts/login.css' %}">
{% endblock %}

{% block content %}
<div class="login-container">
    <h2>Iniciar Sesión</h2>
    <form method="post" id="loginForm">
        {% csrf_token %}
        {{ form.as_p }}
        <button type="submit" class="btn-ingresar">Ingresar</button>
    </form>
    <a href="{% url 'registro' %}" class="btn-volver">Registrarse</a>
</div>
{% endblock %}

{% block extra_js %}
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

{% if messages %}
<script>
/* django-template */
document.addEventListener("DOMContentLoaded", function() {
    {% for message in messages %}
        Swal.fire({
            title: `{% if message.tags == 'success' %}¡Éxito!{% elif message.tags == 'error' %}Error{% else %}Aviso{% endif %}`,
            text: "{{ message|escapejs }}",
            icon: "{% if message.tags == 'success' %}success{% elif message.tags == 'error' %}error{% else %}info{% endif %}",
            showCancelButton: false,
            confirmButtonText: 'Entendido',
            confirmButtonColor: "{% if message.tags == 'success' %}#6a5acd{% elif message.tags == 'error' %}#d33{% else %}#3085d6{% endif %}",
            background: "#fefefe",
            color: "#333",
            iconColor: "{% if message.tags == 'success' %}#6a5acd{% elif message.tags == 'error' %}#d33{% else %}#3085d6{% endif %}",
            customClass: {
                popup: 'swal2-rounded',
                title: 'swal2-title-custom'
            }
        });
    {% endfor %}
});
/* end-django-template */
</script>
{% endif %}
{% endblock %}
{% endwith %}
